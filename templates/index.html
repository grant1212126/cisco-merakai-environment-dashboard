{% extends 'base.html' %}
{% load static %}

{% block header %}
<script src = "{% static 'js/charts.js' %}"></script>
{% endblock header %}

{% block content %}
{{ form.media }}
<div class="box">
  <table>
    <form method="POST">
      {% csrf_token %}
      <tr>
        <td><label for="select">Select location</label></td>
        <td>
          <select id="location_select" name="select" onchange="this.form.submit();">
          {% for location in locations %}
            {% if location.id == selected_location.id %}
            <option selected value="{{ location.id }}">{{ location.name }}</option>
            {% else %}
            <option value="{{ location.id }}">{{ location.name }}</option>
            {% endif %}
          {% endfor %}
          </select>
        </td>
      </tr>
    </form>
    
    <div class="col-md-6 col-12">
      <div class = "card" style="margin-top:30px">
        <div class = "card-body" >
          <div>
            <tr>
              <td>Latest humidity</td>
              <td id="h"></td>
            </tr>
            <tr>
              <td>Latest temperature</td>
              <td id="t"></td>
            </tr>
            <tr>
              <td>Latest occupancy</td>
              <td id="o"></td>
            </tr>
            <tr>
              <td>Outdoors humidity</td>
              <td id="outside_h"></td>
            </tr>
            <tr>
              <td>Outdoors temperature</td>
              <td id="outside_t"></td>
            </tr>
          </div>
          <div class="container">
              <div class='col-md-5'>
                  <div class="form-group">
                     <div class="input-group date" id="dateTimeFrom" data-target-input="nearest">
                          <input type="text" class="form-control datetimepicker-input" data-target="#dateTimeFrom"/>
                          <div class="input-group-append" data-target="#dateTimeFrom" data-toggle="datetimepicker">
                              <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class='col-md-5'>
                  <div class="form-group">
                     <div class="input-group date" id="dateTimeTo" data-target-input="nearest">
                          <input type="text" class="form-control datetimepicker-input" data-target="#dateTimeTo"/>
                          <div class="input-group-append" data-target="#dateTimeTo" data-toggle="datetimepicker">
                              <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                          </div>
                      </div>
                  </div>
              </div>
              <button onclick="MakeCharts()">Filter</button>
          </div>
        </div>
      </div>
    </div>
  </table>
</div>
<div class="box">
  <canvas id="ChartHumidity" width="300" height="150"></canvas>
</div>
<div class="box">
  <canvas id="ChartTemperature" width="300" height="150"></canvas>
</div>
<div class="box">
  <canvas id="ChartOccupancy" width="300" height="150"></canvas>
</div>
{% endblock content %}
